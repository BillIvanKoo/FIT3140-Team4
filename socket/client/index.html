<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io('/client');
        </script>
    </head>
    <body>
        <button id="ping">
            Start Ping
        </button>
    </body>
    <script>
        var button = document.getElementById("ping")
        var time_start = new Date()
        var pong_count = 0
        socket.on("pong_client", function() {
            pong_count++;
            if (pong_count == 100) {
                var time_end = new Date()
                var time_taken = time_end - time_start
                // average time is divided by 200, to get one way communcation speed
                var avg_time = time_taken / 200
                console.log(avg_time);
            } else {
                socket.emit("ping_beaglebone");
            }
        })
        button.onmousedown = function() {
            console.log("ping started")
            pong_count = 0
            time_start = new Date()
            socket.emit("ping_beaglebone")
        }
    </script>
</html>